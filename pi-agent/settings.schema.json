{
	"$id": "https://buildwithpi.ai/schemas/settings.schema.json",
	"title": "Pi Coding Agent Settings",
	"description": "Configuration file for pi coding agent (~/.pi/agent/settings.json or .pi/settings.json)",
	"additionalProperties": false,
	"type": "object",
	"properties": {
		"$schema": {
			"description": "JSON Schema reference",
			"type": "string"
		},
		"lastChangelogVersion": {
			"description": "Last seen changelog version (internal use)",
			"type": "string"
		},
		"defaultProvider": {
			"description": "Default LLM provider (e.g., 'anthropic', 'openai')",
			"type": "string"
		},
		"defaultModel": {
			"description": "Default model ID (e.g., 'claude-sonnet-4-20250514')",
			"type": "string"
		},
		"defaultThinkingLevel": {
			"description": "Default thinking/reasoning level for models that support it",
			"anyOf": [
				{
					"const": "off",
					"type": "string"
				},
				{
					"const": "minimal",
					"type": "string"
				},
				{
					"const": "low",
					"type": "string"
				},
				{
					"const": "medium",
					"type": "string"
				},
				{
					"const": "high",
					"type": "string"
				},
				{
					"const": "xhigh",
					"type": "string"
				}
			]
		},
		"steeringMode": {
			"description": "How to handle multiple steering messages (default: 'one-at-a-time')",
			"anyOf": [
				{
					"const": "all",
					"type": "string"
				},
				{
					"const": "one-at-a-time",
					"type": "string"
				}
			]
		},
		"followUpMode": {
			"description": "How to handle multiple follow-up messages (default: 'one-at-a-time')",
			"anyOf": [
				{
					"const": "all",
					"type": "string"
				},
				{
					"const": "one-at-a-time",
					"type": "string"
				}
			]
		},
		"theme": {
			"description": "Theme name (e.g., 'dark', 'light', 'solarized')",
			"type": "string"
		},
		"compaction": {
			"additionalProperties": false,
			"type": "object",
			"properties": {
				"enabled": {
					"description": "Enable automatic context compaction (default: true)",
					"type": "boolean"
				},
				"reserveTokens": {
					"description": "Tokens reserved for prompt + LLM response (default: 16384)",
					"type": "number"
				},
				"keepRecentTokens": {
					"description": "Tokens to keep from recent messages (default: 20000)",
					"type": "number"
				}
			}
		},
		"branchSummary": {
			"additionalProperties": false,
			"type": "object",
			"properties": {
				"reserveTokens": {
					"description": "Tokens reserved for prompt + LLM response (default: 16384)",
					"type": "number"
				}
			}
		},
		"retry": {
			"additionalProperties": false,
			"type": "object",
			"properties": {
				"enabled": {
					"description": "Enable automatic retries on transient errors (default: true)",
					"type": "boolean"
				},
				"maxRetries": {
					"description": "Maximum retry attempts (default: 3)",
					"type": "number"
				},
				"baseDelayMs": {
					"description": "Base delay for exponential backoff in ms (default: 2000)",
					"type": "number"
				}
			}
		},
		"hideThinkingBlock": {
			"description": "Hide the thinking/reasoning block in output (default: false)",
			"type": "boolean"
		},
		"shellPath": {
			"description": "Custom shell path (e.g., for Cygwin users on Windows)",
			"type": "string"
		},
		"quietStartup": {
			"description": "Suppress startup messages (default: false)",
			"type": "boolean"
		},
		"shellCommandPrefix": {
			"description": "Prefix prepended to every bash command (e.g., \"shopt -s expand_aliases\" for alias support)",
			"type": "string"
		},
		"collapseChangelog": {
			"description": "Show condensed changelog after update (default: false)",
			"type": "boolean"
		},
		"packages": {
			"description": "npm/git packages to load extensions, skills, prompts, themes from",
			"type": "array",
			"items": {
				"anyOf": [
					{
						"description": "npm package name or git URL (loads all resources)",
						"type": "string"
					},
					{
						"additionalProperties": false,
						"type": "object",
						"required": [
							"source"
						],
						"properties": {
							"source": {
								"description": "npm package name or git URL",
								"type": "string"
							},
							"extensions": {
								"description": "Filter to specific extensions",
								"type": "array",
								"items": {
									"type": "string"
								}
							},
							"skills": {
								"description": "Filter to specific skills",
								"type": "array",
								"items": {
									"type": "string"
								}
							},
							"prompts": {
								"description": "Filter to specific prompt templates",
								"type": "array",
								"items": {
									"type": "string"
								}
							},
							"themes": {
								"description": "Filter to specific themes",
								"type": "array",
								"items": {
									"type": "string"
								}
							}
						}
					}
				]
			}
		},
		"extensions": {
			"description": "Local extension file paths or directories",
			"type": "array",
			"items": {
				"type": "string"
			}
		},
		"skills": {
			"description": "Local skill file paths or directories",
			"type": "array",
			"items": {
				"type": "string"
			}
		},
		"prompts": {
			"description": "Local prompt template paths or directories",
			"type": "array",
			"items": {
				"type": "string"
			}
		},
		"themes": {
			"description": "Local theme file paths or directories",
			"type": "array",
			"items": {
				"type": "string"
			}
		},
		"enableSkillCommands": {
			"description": "Register skills as /skill:name commands (default: true)",
			"type": "boolean"
		},
		"terminal": {
			"additionalProperties": false,
			"type": "object",
			"properties": {
				"showImages": {
					"description": "Show images in terminal if supported (default: true)",
					"type": "boolean"
				}
			}
		},
		"images": {
			"additionalProperties": false,
			"type": "object",
			"properties": {
				"autoResize": {
					"description": "Resize images to 2000x2000 max for better model compatibility (default: true)",
					"type": "boolean"
				},
				"blockImages": {
					"description": "Prevent all images from being sent to LLM providers (default: false)",
					"type": "boolean"
				}
			}
		},
		"enabledModels": {
			"description": "Model patterns for cycling (same format as --models CLI flag)",
			"type": "array",
			"items": {
				"type": "string"
			}
		},
		"doubleEscapeAction": {
			"description": "Action for double-escape with empty editor (default: \"tree\")",
			"anyOf": [
				{
					"const": "fork",
					"type": "string"
				},
				{
					"const": "tree",
					"type": "string"
				}
			]
		},
		"thinkingBudgets": {
			"additionalProperties": false,
			"type": "object",
			"properties": {
				"minimal": {
					"description": "Token budget for minimal thinking level",
					"type": "number"
				},
				"low": {
					"description": "Token budget for low thinking level",
					"type": "number"
				},
				"medium": {
					"description": "Token budget for medium thinking level",
					"type": "number"
				},
				"high": {
					"description": "Token budget for high thinking level",
					"type": "number"
				}
			}
		},
		"editorPaddingX": {
			"minimum": 0,
			"maximum": 3,
			"description": "Horizontal padding for input editor (default: 0)",
			"type": "number"
		},
		"showHardwareCursor": {
			"description": "Show terminal cursor while still positioning it for IME (default: false)",
			"type": "boolean"
		},
		"markdown": {
			"additionalProperties": false,
			"type": "object",
			"properties": {
				"codeBlockIndent": {
					"description": "Indentation for code blocks (default: \"  \")",
					"type": "string"
				}
			}
		}
	},
	"$schema": "http://json-schema.org/draft-07/schema#"
}
